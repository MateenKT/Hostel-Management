<c:FragmentDefinition
    xmlns="sap.m"
    xmlns:c="sap.ui.core"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.ui.unified"
    xmlns:mvc="sap.ui.core.mvc"
>
    <Dialog
        id="FacilitiesDialog"
        title="Add facilities"
        type="Message"
        class="sapUiContentPadding"  resizable="true" draggable="true" contentHeight="auto" contentWidth="40%"
    >
        <f:SimpleForm
            editable="true"
            layout="ResponsiveGridLayout"
            labelSpanXL="4"
            labelSpanL="3"
            labelSpanM="4"
            labelSpanS="12"
            columnsXL="2"
            columnsL="2"
            columnsM="1"
        >
            <f:content>
                <!-- Branch Code -->
                <Label text="Branch Code" required="true" />
                <ComboBox
                    id="idRoomType123"
                    placeholder="Select branch Code"
                    selectedKey="{FacilitiesModel>/BranchCode}"
                    items="{BranchModel>/}"
                    showSecondaryValues="true"
                    change=".onFacilitybranchChange"
                    valueStateText="{i18n>selectBranchCode}"
                >
                    <core:ListItem
                        key="{BranchModel>BranchID}"
                        text="{BranchModel>BranchID}"
                        additionalText="{BranchModel>Name}"
                    />
                </ComboBox>

                <!-- Facility Name -->
                <Label text="Facility Name" required="true" />
                <Input
                    id="idFacilityName"
                    value="{FacilitiesModel>/FacilityName}"
                    placeholder="Enter Facility Name"
                    maxLength="60"
                    liveChange=".onFacilityNameChange"
                    valueStateText="{i18n>enterFacilityName}"
                />

                <!-- Type -->
                <Label text="Type" required="true" />
                <ComboBox
                    id="idFacilityName1"
                    items="{FacilityType>/}"
                    placeholder="Enter Type"
                    value="{FacilitiesModel>/Type}"
                    change=".onFacilityTypeChange"
                    width="100%"
                    valueStateText="{i18n>enterFacilityType}"
                >
                    <core:Item
                        key="{FacilityType>ID}"
                        text="{FacilityType>FacilityName}"
                    />
                </ComboBox>

                <!-- Price + Unit -->
                <Label text="Price" required="true" />
                <HBox width="100%" justifyContent="Start" alignItems="Center">
                    <VBox width="50%">
                        <Input
                            id="FO_id_Price"
                            value="{FacilitiesModel>/Price}"
                            placeholder="Enter Price"
                            maxLength="10"
                            liveChange=".onFacilityPriceChange"
                            valueStateText="{i18n>enterFacilityPrice}"
                        />
                    </VBox>
                    <VBox width="50%">
                        <ComboBox
                            id="FO_id_Rate"
                            items="{RateType>/}"
                            selectedKey="Per Day"
                            value="{FacilitiesModel>/UnitText}"
                            change=".onFacilityRateChange"
                            width="100%"
                            valueStateText="{i18n>selectRateType}"
                        >
                            <core:Item
                                key="{RateType>ID}"
                                text="{RateType>RateType}"
                            />
                        </ComboBox>
                    </VBox>
                </HBox>

                <!-- Currency -->
                <Label text="Currency" required="true" />
                <ComboBox
                    id="FL_id_Currency"
                    selectedKey="{FacilitiesModel>/Currency}"
                    items="{CurrencyModel>/}"
                    valueStateText="Select Currency"
                    width="100%"
                    change=".onFacilitybranchChange"
                    placeholder="Select Currency"
                >
                    <c:Item
                        key="{CurrencyModel>currency}"
                        text="{CurrencyModel>currency}"
                    />
                </ComboBox>

                <!-- Upload -->
                <Label
                    text="Add Image"
                    required="true"
                />
                <VBox
                    alignItems="Start"
                    width="100%"
                    renderType="Bare"
                >
                    <HBox width="25%">
                         <u:FileUploader
                            id="fileUploader"
                            fileSizeExceed="onFileSizeExceeds"
                            maximumFileSize="5MB"
                            typeMissmatch="onFileTypeMissmatch"
                            fileType="jpg,jpeg,png"
                            change="onFacilityFileChange"
                            buttonOnly="true"
                            sameFilenameAllowed="true"
                            iconFirst="true"
                            buttonText="Upload Images"
                            multiple="true"
                            uploadOnChange="false"
                            tooltip="Only JPG, PNG, or PDF files under 5MB allowed"
                        />
                    </HBox>
                    <!-- Tokenizer -->
                    <HBox width="75%">
                        <ScrollContainer
                            height="60px"
                            width="100%"
                            horizontal="false"
                            vertical="true"
                        >
                            <Tokenizer
                                id="idTokenList"
                                width="100%"
                                tokenDelete="onTokenDelete"
                                tokens="{tokenModel>/tokens}"
                            >
                                <Token key="{tokenModel>key}" text="{tokenModel>text}" />
                            </Tokenizer>
                        </ScrollContainer>
                    </HBox>
                </VBox>
            </f:content>
        </f:SimpleForm>
        <!-- Footer -->
        <footer>
            <Toolbar>
                <ToolbarSpacer />
                <Button
                    text="Save"
                    press="FD_onsavebuttonpress"
                    type="Accept"
                    id="FO_id_saveButton"
                    class="marginRight"
                />
                <Button
                    text="Cancel"
                    press="FD_onCancelButtonPress"
                    type="Reject"
                    id="FD_id_CancelButton"
                    class="marginRight"
                />
            </Toolbar>
        </footer>
    </Dialog>
</c:FragmentDefinition>
